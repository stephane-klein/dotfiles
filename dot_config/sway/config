### Variables
#
# Logo key. Use Mod1 for Alt.

default_border none

input * {
    xkb_layout "fr"
    xkb_variant "bepo"

    # Swap Left Ctrl with Left Win
    xkb_options ctrl:swap_lwin_lctl
    repeat_rate 60
    repeat_delay 250

    dwt enabled
    tap enabled
}

# Ctrl on my TypeMatrix and Thinkpad
set $mod Mod4

set $term foot
set $menu fuzzel | xargs swaymsg exec --

set $screenshot grim ~/screenshots/scrn-$(date +"%Y-%m-%d-%H-%M-%S").png
set $screenclip slurp | grim -g - ~/screenshots/scrn-$(date +"%Y-%m-%d-%H-%M-%S").png

### Key bindings
#
# Basics:
#
    # Start a terminal
    bindsym $mod+Return exec $term

    bindsym $mod+Space exec $menu

    # Kill focused window
    bindsym $mod+q kill

    # Reload the configuration file
    bindsym $mod+Shift+r reload

    # Exit sway (logs you out of your Wayland session)
    bindsym $mod+Shift+q exec swaynag -t warning -m 'You pressed the exit shortcut. Do you really want to exit sway? This will end your Wayland session.' -B 'Yes, exit sway' 'swaymsg exit'

    # Move your focus around
    bindsym $mod+Left focus left
    bindsym $mod+Down focus down
    bindsym $mod+Up focus up
    bindsym $mod+Right focus right

    # Ditto, with arrow keys
    bindsym $mod+Shift+Left move left
    bindsym $mod+Shift+Down move down
    bindsym $mod+Shift+Up move up
    bindsym $mod+Shift+Right move right

    bindsym $mod+b splith
    bindsym $mod+v splitv

    # Make the current focus fullscreen
    bindsym $mod+f fullscreen

    # Switch to workspace
    bindsym $mod+quotedbl workspace "web"
    bindsym $mod+guillemotleft workspace "code"
    bindsym $mod+guillemotright workspace "signal"
    bindsym $mod+parenleft workspace "slack"
    bindsym $mod+parenright workspace "mattermost"
    bindsym $mod+at workspace number 6
    bindsym $mod+plus workspace number 7
    bindsym $mod+minus workspace number 8
    bindsym $mod+slash workspace number 9
    bindsym $mod+asterisk workspace number 10
    bindsym $mod+equal workspace number 11
    bindsym $mod+percent workspace number 12

    # Screenshot
    bindsym --no-repeat $mod+Print exec $screenshot
    bindsym --no-repeat $mod+Shift+Print exec $screenclip

#
# auto launch applications

workspace "web"
exec flatpak run org.mozilla.firefox

workspace "code"
exec foot

workspace "signal"
exec flatpak run org.signal.Signal

workspace "slack"
exec flatpak run com.slack.Slack

workspace "mattermost"
exec flatpak run com.mattermost.Desktop

exec /usr/lib/polkit-gnome/polkit-gnome-authentication-agent-1
exec mako
exec ~/.config/waybar/launch-waybar.sh
exec swayidle -w \
         timeout 300 'swaylock -f' \
         timeout 600 'swaymsg "output * dpms off"' resume 'swaymsg "output * dpms on"' \
         before-sleep 'swaylock -f'

include /etc/sway/config.d/*
